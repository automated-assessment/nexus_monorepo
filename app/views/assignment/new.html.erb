<div class="well">
  <h2>Create Assignment</h2>
  <h4 class="course-title"><%= icon 'book' %> <%= link_to @assignment.course.title, @assignment.course %></h4>
  <hr />
  <%= form_for(@assignment, url: create_assignment_path, html: { class: 'form-horizontal' }) do |f| %>

    <%= f.hidden_field :course_id, value: @assignment.course.id %>

    <div class="form-group">
      <%= f.label :title, class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.text_field :title, class: 'form-control', required: true %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :description, class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.text_area :description, class: 'form-control', size: '60x6' %>
        <p>Markdown is supported.</p>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :start, class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.datetime_field :start, class: 'form-control', id: 'startfield', value: DateTime.now.utc.strftime('%d %b %Y %H:%M'), 'data-date-format':'dd M yyyy hh:ii' %>
        <p>All times are <strong>UTC</strong>.</p>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :deadline, class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.datetime_field :deadline, class: 'form-control', id: 'deadlinefield', value: (DateTime.now.utc + 1.week).strftime('%d %b %Y %H:%M'), 'data-date-format':'dd M yyyy hh:ii' %>
        <p>All times are <strong>UTC</strong>.</p>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :max_attempts, 'Maximum attempts', class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.number_field :max_attempts, min: 0, step: 1, value: '0', class: 'form-control' %>
        <p>Use <code>0</code> for no limit.</p>
      </div>
    </div>

    <hr>

    <div class="form-group">
      <%= f.label 'Options', class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <div class="checkbox">
          <label>
            <%= f.check_box :allow_late, checked: true %>
            Allow late submissions
          </label>
        </div>
        <div class="checkbox">
          <label>
            <%= f.check_box :feedback_only %>
            Provide feedback only
          </label>
        </div>        
      </div>
    </div>

    <div class="form-group">
      <%= f.label :late_cap, 'Late grade cap (%)', class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.number_field :late_cap, in: 0..100, step: 1, value: '40', class: 'form-control' %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label 'Deadline (Late Submissions)', class: 'col-lg-2 control-label' %>
      <div class="col-lg-10">
        <%= f.datetime_field :latedeadline, class: 'form-control', id: 'latedeadlinefield', value: (DateTime.now.utc + 8.days).strftime('%d %b %Y %H:%M'), 'data-date-format':'dd M yyyy hh:ii' %>
        <p>All times are <strong>UTC</strong>.</p>
      </div>
    </div>

    <hr />
    <h4>Submission Methods</h4>
    <div class="form-group">
      <div class="col-lg-10">
        <div class="checkbox">
          <label>
            <%= f.check_box :allow_zip, checked: true %>
            Allow ZIP uploads
          </label>
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="col-lg-10">
        <div class="checkbox">
          <label>
            <%= f.check_box :allow_git, checked: true %>
            Allow git repository URL + commit SHA submissions
          </label>
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="col-lg-10">
        <div class="checkbox">
          <label>
            <%= f.check_box :allow_ide, checked: true %>
            Allow in-browser IDE submissions
          </label>
        </div>
      </div>
    </div>

    <hr />
    <h4>Marking Tools</h4>
    <p>
      Tools can be given a weighting of <strong>0%</strong> to be used for feedback only; not contributing to the final mark.
    </p>
    <br />

    <div class="marking-tools">
      <%= f.fields_for :marking_tool_contexts do |ff| %>
        <%= render 'marking_tool_context_fields', f: ff %>

        <div class="add-tool-link">
          <%= link_to_add_association f, :marking_tool_contexts, partial: 'marking_tool_context_fields' do |link| %>
            <%= icon 'plus-circle' %> Add Tool
          <% end %>
        </div>
      <% end %>
    </div>

    <hr>
    <br />

    <div class="form-group">
      <div class="col-lg-10 col-lg-offset-2">
        <%= f.submit 'Create', class: 'btn btn-primary' %>
      </div>
    </div>
  <% end %>
</div>
